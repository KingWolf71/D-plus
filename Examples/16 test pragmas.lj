/* Test New Pragma Features
   1. #LJ2_VERSION - displays compiler version from _lj2.ver
   2. #pragma optimizecode on/off - enable/disable optimizations
   3. #pragma ListASM on/off - enable/disable assembly listing
*/

#pragma appname "Pragma Test"
#pragma console on
#pragma optimizecode on
#pragma ListASM off

print("=== Testing New Pragma Features ===\n");

// Test 1: Display LJ2 version
print("\nTest 1: Compiler Version\n");
print("LJ2 Compiler Version: #LJ2_VERSION\n");

// Test 2: Optimizations (should be on by default)
print("\nTest 2: Optimizations Enabled\n");
print("With optimizations:\n");
x = 10 + 5;  // Should be folded to 15 at compile time
print("  10 + 5 = ", x, "\n");

y = x * 1;   // Should eliminate * 1
print("  x * 1 = ", y, "\n");

// Test 3: This code will be optimized
print("\nTest 3: Identity Optimization\n");
a = 42;
b = a + 0;   // Should eliminate + 0
print("  42 + 0 = ", b, "\n");

print("\n=== Pragma Tests Complete ===\n");
print("Note: Use #pragma ListASM on to see generated bytecode\n");
